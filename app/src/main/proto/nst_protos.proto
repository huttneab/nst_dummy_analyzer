syntax = "proto2";

package nst_proto;

option java_package = "com.mechanical_man.nst_proto";

option java_outer_classname = "NSTProtos";

message Command {
	enum Type { FLOW_TEST = 1; CONCENTRATION_TEST = 2; PRESSURE_TEST = 3; FLOW_RESULT = 4; CONCENTRATION_RESULT = 5; PRESSURE_RESULT = 6;}
	enum Gas {O2 = 1; CO2 = 2; NO = 3; NO2 = 4; AIR = 5;}

	required Type type = 1;

	optional FlowTest flow_test = 2;
	optional ConcentrationResult concentration_test = 3;
	optional PressureTest pressure_test = 4;
	optional FlowResult flow_result = 5;
	optional ConcentrationResult concentration_result = 6;
	optional PressureResult pressure_result = 7;

	message FlowTest {
		required int64 test_id = 1;
	}

	message ConcentrationTest {
		required int64 test_id = 1;
	}

	message PressureTest {
		required int64 test_id = 1;
	}

	message FlowResult {
		required int64 test_id = 1;

		required Gas expected_gas = 2;
		required Gas detected_gas = 3;

		required double flow_rate = 4;
		required double flow_pressure = 5;
	}

	message ConcentrationResult {
		required int64 test_id = 1;

		required Gas expected_gas = 2;
		required Gas detected_gas = 3;

		required double gas_concentration = 4;

	}

	message PressureResult {
		required int64 test_id = 1;

		required Gas expected_gas = 2;
		required Gas detected_gas = 3;

		required double static_pressure = 4;
		required double pressure_drop = 5;
	}


}